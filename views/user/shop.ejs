<%- include('./header', {isLogin: isLogin}) %>

<div class="breadcrumbs">
  <div class="container">
    <div class="row">
      <div class="col">
        <p class="bread">
          <span><a href="index.html">Home</a></span> / <span>Shop</span>
        </p>
      </div>
    </div>
  </div>
</div>

<div class="colorlib-product">
  <div class="container">
    <div class="row">
      <div class="col-lg-3 col-xl-3">
        <div class="row">
          <div class="col-sm-12">
            <div class="side border mb-1">
              <h3>Brand</h3>
              <ul>
                <li><a href="#">Nike</a></li>
                <li><a href="#">Adidas</a></li>
                <li><a href="#">Merrel</a></li>
                <li><a href="#">Gucci</a></li>
                <li><a href="#">Skechers</a></li>
              </ul>
            </div>
          </div>
          <div class="col-sm-12">
            <div class="side border mb-1">
              <h3>Size/Width</h3>
              <div class="block-26 mb-2">
                <h4>Size</h4>
                <ul>
                  <li><a href="#">7</a></li>
                  <li><a href="#">7.5</a></li>
                  <li><a href="#">8</a></li>
                  <li><a href="#">8.5</a></li>
                  <li><a href="#">9</a></li>
                  <li><a href="#">9.5</a></li>
                  <li><a href="#">10</a></li>
                  <li><a href="#">10.5</a></li>
                  <li><a href="#">11</a></li>
                  <li><a href="#">11.5</a></li>
                  <li><a href="#">12</a></li>
                  <li><a href="#">12.5</a></li>
                  <li><a href="#">13</a></li>
                  <li><a href="#">13.5</a></li>
                  <li><a href="#">14</a></li>
                </ul>
              </div>
              <div class="block-26">
                <h4>Width</h4>
                <ul>
                  <li><a href="#">M</a></li>
                  <li><a href="#">W</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="col-sm-12">
            <div class="side border mb-1">
              <h3>Style</h3>
              <ul>
                <li><a href="#">Slip Ons</a></li>
                <li><a href="#">Boots</a></li>
                <li><a href="#">Sandals</a></li>
                <li><a href="#">Lace Ups</a></li>
                <li><a href="#">Oxfords</a></li>
              </ul>
            </div>
          </div>
          <div class="col-sm-12">
            <div class="side border mb-1">
              <h3>Colors</h3>
              <ul>
                <li><a href="#">Black</a></li>
                <li><a href="#">White</a></li>
                <li><a href="#">Blue</a></li>
                <li><a href="#">Red</a></li>
                <li><a href="#">Green</a></li>
                <li><a href="#">Grey</a></li>
                <li><a href="#">Orange</a></li>
                <li><a href="#">Cream</a></li>
                <li><a href="#">Brown</a></li>
              </ul>
            </div>
          </div>
          <div class="col-sm-12">
            <div class="side border mb-1">
              <h3>Material</h3>
              <ul>
                <li><a href="#">Leather</a></li>
                <li><a href="#">Suede</a></li>
              </ul>
            </div>
          </div>
          <div class="col-sm-12">
            <div class="side border mb-1">
              <h3>Technologies</h3>
              <ul>
                <li><a href="#">BioBevel</a></li>
                <li><a href="#">Groove</a></li>
                <li><a href="#">FlexBevel</a></li>
              </ul>
            </div>
          </div>
        </div>
      </div>
      <div class="col-lg-9 col-xl-9">
        <div class="row row-pb-md" id="item-container"></div>
        <div class="row">
          <div class="col-md-12 text-center">
            <div class="block-27">
              <ul>
                <li>
                  <a href="#"><i class="ion-ios-arrow-back"></i></a>
                </li>
                <li class="active"><span>1</span></li>
                <li><a href="#">2</a></li>
                <li><a href="#">3</a></li>
                <li><a href="#">4</a></li>
                <li><a href="#">5</a></li>
                <li>
                  <a href="#"><i class="ion-ios-arrow-forward"></i></a>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="colorlib-partner">
  <div class="container">
    <div class="row">
      <div
        class="col-sm-8 offset-sm-2 text-center colorlib-heading colorlib-heading-sm"
      >
        <h2>Trusted Partners</h2>
      </div>
    </div>
    <div class="row">
      <div class="col partner-col text-center">
        <img
          src="images/brand-1.jpg"
          class="img-fluid"
          alt="Free html4 bootstrap 4 template"
        />
      </div>
      <div class="col partner-col text-center">
        <img
          src="images/brand-2.jpg"
          class="img-fluid"
          alt="Free html4 bootstrap 4 template"
        />
      </div>
      <div class="col partner-col text-center">
        <img
          src="images/brand-3.jpg"
          class="img-fluid"
          alt="Free html4 bootstrap 4 template"
        />
      </div>
      <div class="col partner-col text-center">
        <img
          src="images/brand-4.jpg"
          class="img-fluid"
          alt="Free html4 bootstrap 4 template"
        />
      </div>
      <div class="col partner-col text-center">
        <img
          src="images/brand-5.jpg"
          class="img-fluid"
          alt="Free html4 bootstrap 4 template"
        />
      </div>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script>
  document.addEventListener("DOMContentLoaded", (event) => {
    let itemContainer = document.getElementById("item-container");

    itemContainer.innerHTML = "";

	axios
  .get("/shop/items")
  .then((response) => {
    if (response.status == 200) {
    //   console.log(response.data.varients);
    //   console.log(response.data.products[0], "Hey");
    //   console.log(response.data.subVarients);

    //   let varients = response.data.varients;
    //   let products = response.data.products;
    //   let subVarients = response.data.subVarients;

    //   let mappedProduct = products.map((product) => {
    //     let filteredVarients = varients
    //       .filter((varient) => varient.product._id == product._id)
    //       .map((varient) => {
    //         let filteredSubvarients = subVarients.filter(
    //           (subVarient) => subVarient.varient == varient._id
    //         );
    //         return { ...varient, subVarients: filteredSubvarients };
    //       });

    //     return { ...product, varient: filteredVarients };
    //   });

	//console.log(mappedProduct);

	let products = response.data.products;

      products.forEach((item) => {
        itemContainer.innerHTML += `
          <div class="col-lg-4 mb-4 text-center">
            <div class="product-entry border">
              <a href="/shop/items/${item._id}" class="prod-img">
                <img src="/static/images/${item.varients[0].images[0]}" class="img-fluid" alt="Free html5 bootstrap 4 template">
              </a>
              <div class="desc">
                <h2><a href="/shop/items/${item._id}" >${item.modelName} ${item.category.categoryName} for ${item.gender}</a></h2>
                <span class="price">â‚¹${item.varients[0].subVarients[0].price}</span>
              </div>
            </div>
          </div>
        `;
      });
    }
  })
  .catch((error) => {
    console.log("it is an error", error);
  });

  })
</script>

<%- include('./footer') %>
